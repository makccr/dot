/*
 * File combining 
 * (1) sha.js by Brian Turek 2008-2013 under BSD license
 * (2) and a modified js OTP implementation found on JSFiddle
*/

"use strict";var _createClass=function(){function r(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}}();function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){var r,e,n;void 0===n&&void 0!==window&&(n=window),e=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(_classCallCheck(this,r),this.expiry=e,this.length=n,this.length>8||this.length<6)throw"Error: invalid code length"}return _createClass(r,[{key:"dec2hex",value:function(r){return(r<15.5?"0":"")+Math.round(r).toString(16)}},{key:"hex2dec",value:function(r){return parseInt(r,16)}},{key:"base32tohex",value:function(r){var e,n,t,o,i;for("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",e="",t="",o=0;o<r.length;)i="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(r.charAt(o).toUpperCase()),e+=this.leftpad(i.toString(2),5,"0"),o++;for(o=0;o+4<=e.length;)n=e.substr(o,4),t+=parseInt(n,2).toString(16),o+=4;return t}},{key:"leftpad",value:function(r,e,n){return e+1>=r.length&&(r=Array(e+1-r.length).join(n)+r),r}},{key:"getOtp",value:function(r){var e,n,t,o,i,h,w,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getTime();if(t=this.base32tohex(r),e=Math.round(u/1e3),w=this.leftpad(this.dec2hex(Math.floor(e/this.expiry)),16,"0"),(h=new jsSHA("SHA-1","HEX")).setHMACKey(t,"HEX"),h.update(w),"KEY MUST BE IN BYTE INCREMENTS"===(n=h.getHMAC("HEX")))throw"Error: hex key must be in byte increments";return o=this.hex2dec(n.substring(n.length-1)),i=(i=(this.hex2dec(n.substr(2*o,8))&this.hex2dec("7fffffff"))+"").length>this.length?i.substr(i.length-this.length,this.length):this.leftpad(i,this.length,"0")}}]),r}(),r=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;if(_classCallCheck(this,r),this.length=e,this.length>8||this.length<6)throw"Error: invalid code length"}return _createClass(r,[{key:"uintToString",value:function(r){var e;return e=String.fromCharCode.apply(null,r),decodeURIComponent(escape(e))}},{key:"getOtp",value:function(r,e){var n,t,o,i,h;return(i=new jsSHA("SHA-1","TEXT")).setHMACKey(r,"TEXT"),i.update(this.uintToString(new Uint8Array(this.intToBytes(e)))),n=i.getHMAC("HEX"),h=(127&(t=this.hexToBytes(n))[o=15&t[19]])<<24|(255&t[o+1])<<16|(255&t[o+2])<<8|255&t[o+3],(h+="").substr(h.length-this.length,this.length)}},{key:"intToBytes",value:function(r){var e,n;for(e=[],n=7;n>=0;)e[n]=255&r,r>>=8,--n;return e}},{key:"hexToBytes",value:function(r){var e,n,t;for(n=[],t=0,e=r.length;t<e;)n.push(parseInt(r.substr(t,2),16)),t+=2;return n}}]),r}(),window.jsOTP={},jsOTP.totp=e,jsOTP.hotp=r}).call(window);var SUPPORTED_ALGS=7;!function(r){function e(r,e){this.highOrder=r,this.lowOrder=e}function n(r,e,n){var t,o,i,h,w,u,a=r.length;if(t=e||[0],u=(n=n||0)>>>3,0!=a%2)throw new Error("String of HEX type must be in byte increments");for(o=0;o<a;o+=2){if(i=parseInt(r.substr(o,2),16),isNaN(i))throw new Error("String of HEX type contains invalid characters");for(h=(w=(o>>>1)+u)>>>2;t.length<=h;)t.push(0);t[h]|=i<<8*(3-w%4)}return{value:t,binLen:4*a+n}}function t(r,e,n){var t,o,i,h,w,u=[];for(u=e||[0],i=(n=n||0)>>>3,o=0;o<r.length;o+=1)t=r.charCodeAt(o),h=(w=o+i)>>>2,u.length<=h&&u.push(0),u[h]|=t<<8*(3-w%4);return{value:u,binLen:8*r.length+n}}function o(r,e,n){var t,o,i,h,w,u,a,d,l=[],f=0;if(l=e||[0],u=(n=n||0)>>>3,-1===r.search(/^[a-zA-Z0-9=+\/]+$/))throw new Error("Invalid character in base-64 string");if(w=r.indexOf("="),r=r.replace(/\=/g,""),-1!==w&&w<r.length)throw new Error("Invalid '=' found in base-64 string");for(t=0;t<r.length;t+=4){for(h=r.substr(t,4),i=0,o=0;o<h.length;o+=1)i|="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[o])<<18-6*o;for(o=0;o<h.length-1;o+=1){for(a=(d=f+u)>>>2;l.length<=a;)l.push(0);l[a]|=(i>>>16-8*o&255)<<8*(3-d%4),f+=1}}return{value:l,binLen:8*f+n}}function i(r,e){var n,t,o="",i=4*r.length;for(n=0;n<i;n+=1)t=r[n>>>2]>>>8*(3-n%4),o+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return e.outputUpper?o.toUpperCase():o}function h(r,e){var n,t,o,i,h,w,u="",a=4*r.length;for(n=0;n<a;n+=3)for(i=n+1>>>2,h=r.length<=i?0:r[i],i=n+2>>>2,w=r.length<=i?0:r[i],o=(r[n>>>2]>>>8*(3-n%4)&255)<<16|(h>>>8*(3-(n+1)%4)&255)<<8|w>>>8*(3-(n+2)%4)&255,t=0;t<4;t+=1)8*n+6*t<=32*r.length?u+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-t)&63):u+=e.b64Pad;return u}function w(r){var e,n,t="",o=4*r.length;for(e=0;e<o;e+=1)n=r[e>>>2]>>>8*(3-e%4)&255,t+=String.fromCharCode(n);return t}function u(r){var e,n={outputUpper:!1,b64Pad:"="};if(e=r||{},n.outputUpper=e.outputUpper||!1,n.b64Pad=e.b64Pad||"=","boolean"!=typeof n.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof n.b64Pad)throw new Error("Invalid b64Pad formatting option");return n}function a(r,e){var i;switch(e){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(r){case"HEX":i=n;break;case"TEXT":i=function(r,n,t){return function(r,e,n,t){var o,i,h,w,u,a,d=[],l=[],f=0;if(d=n||[0],w=(t=t||0)>>>3,"UTF8"===e)for(i=0;i<r.length;i+=1)for(l=[],128>(o=r.charCodeAt(i))?l.push(o):2048>o?(l.push(192|o>>>6),l.push(128|63&o)):55296>o||57344<=o?l.push(224|o>>>12,128|o>>>6&63,128|63&o):(i+=1,o=65536+((1023&o)<<10|1023&r.charCodeAt(i)),l.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),h=0;h<l.length;h+=1){for(u=(a=f+w)>>>2;d.length<=u;)d.push(0);d[u]|=l[h]<<8*(3-a%4),f+=1}else if("UTF16BE"===e||"UTF16LE"===e)for(i=0;i<r.length;i+=1){for(o=r.charCodeAt(i),"UTF16LE"===e&&(o=(h=255&o)<<8|o>>>8),u=(a=f+w)>>>2;d.length<=u;)d.push(0);d[u]|=o<<8*(2-a%4),f+=2}return{value:d,binLen:8*f+t}}(r,e,n,t)};break;case"B64":i=o;break;case"BYTES":i=t;break;default:throw new Error("format must be HEX, TEXT, B64, or BYTES")}return i}function d(r,e){return r<<e|r>>>32-e}function l(r,e){return r>>>e|r<<32-e}function f(r,n){var t=new e(r.highOrder,r.lowOrder);return 32>=n?new e(t.highOrder>>>n|t.lowOrder<<32-n&4294967295,t.lowOrder>>>n|t.highOrder<<32-n&4294967295):new e(t.lowOrder>>>n-32|t.highOrder<<64-n&4294967295,t.highOrder>>>n-32|t.lowOrder<<64-n&4294967295)}function s(r,e){return r>>>e}function O(r,n){return 32>=n?new e(r.highOrder>>>n,r.lowOrder>>>n|r.highOrder<<32-n&4294967295):new e(0,r.highOrder>>>n-32)}function g(r,e,n){return r^e^n}function c(r,e,n){return r&e^~r&n}function p(r,n,t){return new e(r.highOrder&n.highOrder^~r.highOrder&t.highOrder,r.lowOrder&n.lowOrder^~r.lowOrder&t.lowOrder)}function S(r,e,n){return r&e^r&n^e&n}function E(r,n,t){return new e(r.highOrder&n.highOrder^r.highOrder&t.highOrder^n.highOrder&t.highOrder,r.lowOrder&n.lowOrder^r.lowOrder&t.lowOrder^n.lowOrder&t.lowOrder)}function v(r){return l(r,2)^l(r,13)^l(r,22)}function A(r){var n=f(r,28),t=f(r,34),o=f(r,39);return new e(n.highOrder^t.highOrder^o.highOrder,n.lowOrder^t.lowOrder^o.lowOrder)}function H(r){return l(r,6)^l(r,11)^l(r,25)}function T(r){var n=f(r,14),t=f(r,18),o=f(r,41);return new e(n.highOrder^t.highOrder^o.highOrder,n.lowOrder^t.lowOrder^o.lowOrder)}function b(r){return l(r,7)^l(r,18)^s(r,3)}function P(r){var n=f(r,1),t=f(r,8),o=O(r,7);return new e(n.highOrder^t.highOrder^o.highOrder,n.lowOrder^t.lowOrder^o.lowOrder)}function U(r){return l(r,17)^l(r,19)^s(r,10)}function y(r){var n=f(r,19),t=f(r,61),o=O(r,6);return new e(n.highOrder^t.highOrder^o.highOrder,n.lowOrder^t.lowOrder^o.lowOrder)}function C(r,e){var n=(65535&r)+(65535&e);return(65535&(r>>>16)+(e>>>16)+(n>>>16))<<16|65535&n}function k(r,e,n,t){var o=(65535&r)+(65535&e)+(65535&n)+(65535&t);return(65535&(r>>>16)+(e>>>16)+(n>>>16)+(t>>>16)+(o>>>16))<<16|65535&o}function m(r,e,n,t,o){var i=(65535&r)+(65535&e)+(65535&n)+(65535&t)+(65535&o);return(65535&(r>>>16)+(e>>>16)+(n>>>16)+(t>>>16)+(o>>>16)+(i>>>16))<<16|65535&i}function L(r,n){var t,o,i;return t=(65535&r.lowOrder)+(65535&n.lowOrder),i=(65535&(o=(r.lowOrder>>>16)+(n.lowOrder>>>16)+(t>>>16)))<<16|65535&t,t=(65535&r.highOrder)+(65535&n.highOrder)+(o>>>16),new e((65535&(o=(r.highOrder>>>16)+(n.highOrder>>>16)+(t>>>16)))<<16|65535&t,i)}function R(r,n,t,o){var i,h,w;return i=(65535&r.lowOrder)+(65535&n.lowOrder)+(65535&t.lowOrder)+(65535&o.lowOrder),w=(65535&(h=(r.lowOrder>>>16)+(n.lowOrder>>>16)+(t.lowOrder>>>16)+(o.lowOrder>>>16)+(i>>>16)))<<16|65535&i,i=(65535&r.highOrder)+(65535&n.highOrder)+(65535&t.highOrder)+(65535&o.highOrder)+(h>>>16),new e((65535&(h=(r.highOrder>>>16)+(n.highOrder>>>16)+(t.highOrder>>>16)+(o.highOrder>>>16)+(i>>>16)))<<16|65535&i,w)}function x(r,n,t,o,i){var h,w,u;return h=(65535&r.lowOrder)+(65535&n.lowOrder)+(65535&t.lowOrder)+(65535&o.lowOrder)+(65535&i.lowOrder),u=(65535&(w=(r.lowOrder>>>16)+(n.lowOrder>>>16)+(t.lowOrder>>>16)+(o.lowOrder>>>16)+(i.lowOrder>>>16)+(h>>>16)))<<16|65535&h,h=(65535&r.highOrder)+(65535&n.highOrder)+(65535&t.highOrder)+(65535&o.highOrder)+(65535&i.highOrder)+(w>>>16),new e((65535&(w=(r.highOrder>>>16)+(n.highOrder>>>16)+(t.highOrder>>>16)+(o.highOrder>>>16)+(i.highOrder>>>16)+(h>>>16)))<<16|65535&h,u)}function B(r){var n,t,o;if("SHA-1"===r&&1&SUPPORTED_ALGS)n=[1732584193,4023233417,2562383102,271733878,3285377520];else{if(!(6&SUPPORTED_ALGS))throw new Error("No SHA variants supported");switch(t=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],o=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r){case"SHA-224":n=t;break;case"SHA-256":n=o;break;case"SHA-384":n=[new e(3418070365,t[0]),new e(1654270250,t[1]),new e(2438529370,t[2]),new e(355462360,t[3]),new e(1731405415,t[4]),new e(41048885895,t[5]),new e(3675008525,t[6]),new e(1203062813,t[7])];break;case"SHA-512":n=[new e(o[0],4089235720),new e(o[1],2227873595),new e(o[2],4271175723),new e(o[3],1595750129),new e(o[4],2917565137),new e(o[5],725511199),new e(o[6],4215389547),new e(o[7],327033209)];break;default:throw new Error("Unknown SHA variant")}}return n}function _(r,e){var n,t,o,i,h,w,u,a=[],l=c,f=g,s=S,O=d,p=C,E=m;for(n=e[0],t=e[1],o=e[2],i=e[3],h=e[4],u=0;u<80;u+=1)a[u]=u<16?r[u]:O(a[u-3]^a[u-8]^a[u-14]^a[u-16],1),w=u<20?E(O(n,5),l(t,o,i),h,1518500249,a[u]):u<40?E(O(n,5),f(t,o,i),h,1859775393,a[u]):u<60?E(O(n,5),s(t,o,i),h,2400959708,a[u]):E(O(n,5),f(t,o,i),h,3395469782,a[u]),h=i,i=o,o=O(t,30),t=n,n=w;return e[0]=p(n,e[0]),e[1]=p(t,e[1]),e[2]=p(o,e[2]),e[3]=p(i,e[3]),e[4]=p(h,e[4]),e}function D(r,e,n,t){var o,i,h;for(h=15+(e+65>>>9<<4);r.length<=h;)r.push(0);for(r[e>>>5]|=128<<24-e%32,r[h]=e+n,i=r.length,o=0;o<i;o+=16)t=_(r.slice(o,o+16),t);return t}var G,M;function X(r,n,t){var o,i,h,w,u,a,d,l,f,s,O,g,B,_,D,X,F,I,Y,N,j,K,Z,z,J,Q,V,W=[];if(("SHA-224"===t||"SHA-256"===t)&&2&SUPPORTED_ALGS)O=64,B=1,Z=Number,_=C,D=k,X=m,F=b,I=U,Y=v,N=H,K=S,j=c,V=G;else{if("SHA-384"!==t&&"SHA-512"!==t||!(4&SUPPORTED_ALGS))throw new Error("Unexpected error in SHA-2 implementation");O=80,B=2,Z=e,_=L,D=R,X=x,F=P,I=y,Y=A,N=T,K=E,j=p,V=M}for(o=n[0],i=n[1],h=n[2],w=n[3],u=n[4],a=n[5],d=n[6],l=n[7],g=0;g<O;g+=1)g<16?(Q=g*B,z=r.length<=Q?0:r[Q],J=r.length<=Q+1?0:r[Q+1],W[g]=new Z(z,J)):W[g]=D(I(W[g-2]),W[g-7],F(W[g-15]),W[g-16]),f=X(l,N(u),j(u,a,d),V[g],W[g]),s=_(Y(o),K(o,i,h)),l=d,d=a,a=u,u=_(w,f),w=h,h=i,i=o,o=_(f,s);return n[0]=_(o,n[0]),n[1]=_(i,n[1]),n[2]=_(h,n[2]),n[3]=_(w,n[3]),n[4]=_(u,n[4]),n[5]=_(a,n[5]),n[6]=_(d,n[6]),n[7]=_(l,n[7]),n}6&SUPPORTED_ALGS&&(G=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],4&SUPPORTED_ALGS&&(M=[new e(G[0],3609767458),new e(G[1],602891725),new e(G[2],3964484399),new e(G[3],2173295548),new e(G[4],4081628472),new e(G[5],3053834265),new e(G[6],2937671579),new e(G[7],3664609560),new e(G[8],2734883394),new e(G[9],1164996542),new e(G[10],1323610764),new e(G[11],3590304994),new e(G[12],4068182383),new e(G[13],991336113),new e(G[14],633803317),new e(G[15],3479774868),new e(G[16],2666613458),new e(G[17],944711139),new e(G[18],2341262773),new e(G[19],2007800933),new e(G[20],1495990901),new e(G[21],1856431235),new e(G[22],3175218132),new e(G[23],2198950837),new e(G[24],3999719339),new e(G[25],766784016),new e(G[26],2566594879),new e(G[27],3203337956),new e(G[28],1034457026),new e(G[29],2466948901),new e(G[30],3758326383),new e(G[31],168717936),new e(G[32],1188179964),new e(G[33],1546045734),new e(G[34],1522805485),new e(G[35],2643833823),new e(G[36],2343527390),new e(G[37],1014477480),new e(G[38],1206759142),new e(G[39],344077627),new e(G[40],1290863460),new e(G[41],3158454273),new e(G[42],3505952657),new e(G[43],106217008),new e(G[44],3606008344),new e(G[45],1432725776),new e(G[46],1467031594),new e(G[47],851169720),new e(G[48],3100823752),new e(G[49],1363258195),new e(G[50],3750685593),new e(G[51],3785050280),new e(G[52],3318307427),new e(G[53],3812723403),new e(G[54],2003034995),new e(G[55],3602036899),new e(G[56],1575990012),new e(G[57],1125592928),new e(G[58],2716904306),new e(G[59],442776044),new e(G[60],593698344),new e(G[61],3733110249),new e(G[62],2999351573),new e(G[63],3815920427),new e(3391569614,3928383900),new e(3515267271,566280711),new e(3940187606,3454069534),new e(4118630271,4000239992),new e(116418474,1914138554),new e(174292421,2731055270),new e(289380356,3203993006),new e(460393269,320620315),new e(685471733,587496836),new e(852142971,1086792851),new e(1017036298,365543100),new e(1126000580,2618297676),new e(1288033470,3409855158),new e(1501505948,4234509866),new e(1607167915,987167468),new e(1816402316,1246189591)]));var F=function(r,e,n){var t,o,d,l,f,s,O,g,c,p=0,S=[],E=0,v=r,A=!1,H=!1,T=[],b=[],P=!1;if(t=(c=n||{}).encoding||"UTF8",g=c.numRounds||1,d=a(e,t),g!==parseInt(g,10)||1>g)throw new Error("numRounds must a integer >= 1");if("SHA-1"===v&&1&SUPPORTED_ALGS)f=512,s=_,O=D,l=160;else if(6&SUPPORTED_ALGS&&(s=function(r,e){return X(r,e,v)},O=function(r,e,n,t){return function(r,e,n,t,o){var i,h,w,u,a;if(("SHA-224"===o||"SHA-256"===o)&&2&SUPPORTED_ALGS)w=15+(e+65>>>9<<4),a=16;else{if("SHA-384"!==o&&"SHA-512"!==o||!(4&SUPPORTED_ALGS))throw new Error("Unexpected error in SHA-2 implementation");w=31+(e+129>>>10<<5),a=32}for(;r.length<=w;)r.push(0);for(r[e>>>5]|=128<<24-e%32,r[w]=e+n,h=r.length,i=0;i<h;i+=a)t=X(r.slice(i,i+a),t,o);if("SHA-224"===o&&2&SUPPORTED_ALGS)u=[t[0],t[1],t[2],t[3],t[4],t[5],t[6]];else if("SHA-256"===o&&2&SUPPORTED_ALGS)u=t;else if("SHA-384"===o&&4&SUPPORTED_ALGS)u=[t[0].highOrder,t[0].lowOrder,t[1].highOrder,t[1].lowOrder,t[2].highOrder,t[2].lowOrder,t[3].highOrder,t[3].lowOrder,t[4].highOrder,t[4].lowOrder,t[5].highOrder,t[5].lowOrder];else{if(!("SHA-512"===o&&4&SUPPORTED_ALGS))throw new Error("Unexpected error in SHA-2 implementation");u=[t[0].highOrder,t[0].lowOrder,t[1].highOrder,t[1].lowOrder,t[2].highOrder,t[2].lowOrder,t[3].highOrder,t[3].lowOrder,t[4].highOrder,t[4].lowOrder,t[5].highOrder,t[5].lowOrder,t[6].highOrder,t[6].lowOrder,t[7].highOrder,t[7].lowOrder]}return u}(r,e,n,t,v)}),"SHA-224"===v&&2&SUPPORTED_ALGS)f=512,l=224;else if("SHA-256"===v&&2&SUPPORTED_ALGS)f=512,l=256;else if("SHA-384"===v&&4&SUPPORTED_ALGS)f=1024,l=384;else{if(!("SHA-512"===v&&4&SUPPORTED_ALGS))throw new Error("Chosen SHA variant is not supported");f=1024,l=512}o=B(v),this.setHMACKey=function(r,e,n){var i,h,w,u,d,l;if(!0===H)throw new Error("HMAC key already set");if(!0===A)throw new Error("Cannot set HMAC key after finalizing hash");if(!0===P)throw new Error("Cannot set HMAC key after calling update");if(h=(i=a(e,t=(n||{}).encoding||"UTF8")(r)).binLen,w=i.value,l=(u=f>>>3)/4-1,u<h/8){for(w=O(w,h,0,B(v));w.length<=l;)w.push(0);w[l]&=4294967040}else if(u>h/8){for(;w.length<=l;)w.push(0);w[l]&=4294967040}for(d=0;d<=l;d+=1)T[d]=909522486^w[d],b[d]=1549556828^w[d];o=s(T,o),p=f,H=!0},this.update=function(r){var e,n,t,i,h,w=0,u=f>>>5;for(n=(e=d(r,S,E)).binLen,i=e.value,t=n>>>5,h=0;h<t;h+=u)w+f<=n&&(o=s(i.slice(h,h+u),o),w+=f);p+=w,S=i.slice(w>>>5),E=n%f,P=!0},this.getHash=function(r,e){var n,t,a;if(!0===H)throw new Error("Cannot call getHash after setting HMAC key");switch(a=u(e),r){case"HEX":n=function(r){return i(r,a)};break;case"B64":n=function(r){return h(r,a)};break;case"BYTES":n=w;break;default:throw new Error("format must be HEX, B64, or BYTES")}if(!1===A)for(o=O(S,E,p,o),t=1;t<g;t+=1)o=O(o,l,0,B(v));return A=!0,n(o)},this.getHMAC=function(r,e){var n,t,a;if(!1===H)throw new Error("Cannot call getHMAC without first setting HMAC key");switch(a=u(e),r){case"HEX":n=function(r){return i(r,a)};break;case"B64":n=function(r){return h(r,a)};break;case"BYTES":n=w;break;default:throw new Error("outputFormat must be HEX, B64, or BYTES")}return!1===A&&(t=O(S,E,p,o),o=s(b,B(v)),o=O(t,l,f,o)),A=!0,n(o)}};"function"==typeof define&&define.amd?define(function(){return F}):"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=exports=F:exports=F:r.jsSHA=F}(window);